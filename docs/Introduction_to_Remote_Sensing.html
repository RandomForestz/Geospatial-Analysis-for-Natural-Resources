<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Josh Carrell - Utah State University, MS Ecology" />


<title>Introduction to Remote Sensing</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">NR 6950: Geospatial Analysis for Natural Resources</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    R Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Introduction_to_R_Programming.html">Intro to R</a>
    </li>
    <li>
      <a href="Introduction_to_Data_Wrangling.html">Intro to Data Wrangling</a>
    </li>
    <li>
      <a href="Introduction_to_Data_Visualization.html">Intro to Data Visualization</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Geospatial Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Introduction_to_Geospatial_Data_Coordinate_Systems.html">Introduction to Coordinate Systems</a>
    </li>
    <li>
      <a href="Introduction_to_Spatial_Vector_Data.html">Introduction to Spatial Vector Data</a>
    </li>
    <li>
      <a href="Introduction_to_Spatial_Raster_Data.html">Introduction to Spatial Raster Data</a>
    </li>
    <li>
      <a href="Introduction_to_Remote_Sensing.html">Introduction to Remote Sensing</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced Geospatial Topics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Point_Pattern_Analysis.html">Point Pattern Analysis</a>
    </li>
    <li>
      <a href="Burn_ratio.html">Remote Sensing: Difference Normalized Burn Ratio</a>
    </li>
    <li>
      <a href="Species_Distribution_Modeling.html">Species Distribution Modeling</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Introduction to Remote Sensing</h1>
<h4 class="author">Josh Carrell - Utah State University, MS Ecology</h4>
<h4 class="date">Last Update: May 13, 2022</h4>

</div>


<div id="remote-sensing" class="section level2">
<h2>Remote Sensing</h2>
<p>“Remote sensing is the process of detecting and monitoring the physical characteristics of an area by measuring its reflected and emitted radiation at a distance (typically from satellite or aircraft)” - USGS</p>
<p>At it’s simplest form, remote sensing is the process of obtaining information about an object without actually coming into contact with that object. It is gathering information at a distance. If you think about it, your eyes remotely sense the world around you.</p>
<p>However, in this sense of Remote Sensing, we are talking about the practice of cameras/sensors attached to satellite and airplanes capturing images and obtaining information about the physical, chemical, and biological properties of Earth.</p>
<div id="remote-sensing-in-practice" class="section level3">
<h3>Remote Sensing in Practice</h3>
<p>Remote Sensing is used in a variety studies and applications. Here is a website that outlines 100 examples of remote sensing:</p>
<p><a href="https://gisgeography.com/remote-sensing-applications/" class="uri">https://gisgeography.com/remote-sensing-applications/</a></p>
<hr />
</div>
<div id="electromagnetic-spectrum" class="section level3">
<h3>Electromagnetic Spectrum</h3>
<p>Light is the ingredient that allows us to examine the world around us. Everything we see, particularly color, is a result of light.</p>
<p>“The electromagnetic spectrum is the term used by scientists to describe the entire range of light that exists. From radio waves to gamma rays, most of the light in the universe is, in fact, invisible to us! Light is a wave of alternating electric and magnetic fields” (earthsky.org).</p>
<p><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/spectrum.png" /></p>
<hr />
<p>Everything that comes in contact with light absorbs and reflects certain ranges of light. Why are plants green? Chlorophyll… But it’s actually deeper than that. Chlorophyll absorbs visible light in the blue and red regions of the spectrum while it reflects light in the green, yellow, and near-infrared (not visible) regions. Specifically, we measure the electromagnetic in nanometers (nm) with visible in the 700-400nm.</p>
</div>
<div id="the-takeaway" class="section level3">
<h3>The Takeaway</h3>
<p>We will be covering less of what remote sensing is, and more so how to use remote sensing techniques. If you can take away the following principles, you’ll be well prepared to interpret remote sensing methods and imagery well enough at a basic level (You can spend an entire semester in a remote sensing course and only cover the basics):</p>
<ol style="list-style-type: decimal">
<li><p>Everything we see reflects and absorbs light.</p></li>
<li><p>The human eye can only see 700nm-400nm of the electromagnetic spectrum.</p></li>
<li><p>Light reflectance, absorbtion, and emittence goes far beyond the visible spectrum.</p></li>
<li><p>We use the process of remote sensing to obtain information about the electromagnetic radiation (light) that is absorbed, reflected, and emitted by objects through images captured by cameras.</p></li>
<li><p>Cameras (depending on price and components) can collect a single image spatially, but capture various images spectrally. These collected images of various spectra, are called bands.</p></li>
</ol>
<hr />
</div>
</div>
<div id="bands" class="section level2">
<h2>Bands</h2>
<p>We often hear the phrase, “across time and space”, when learning about geospatial analysis. When you think about remote sensing, I want you to start thinking, “across space and spectral properties”.</p>
<p>Cameras (you’ll read about specific sensors below) have the capability to capture different waves of electromagnetic radiation in the same spatial extent. These captured waves are called, “Bands”.</p>
<p><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/bands.png" /></p>
<p>It is through these captured bands that we understand the spectral properties (the properties that object interacts with electromagnetic radiation) of an object in space.</p>
<hr />
<div id="band-combinations" class="section level3">
<h3>Band Combinations</h3>
<p>Combining bands of imagery in mathematical operations gives us insight into examining different landscapes.</p>
<p><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/combos.png" /></p>
<hr />
</div>
</div>
<div id="sensor-types" class="section level2 tabset">
<h2 class="tabset">Sensor Types</h2>
<p><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/spectral.jpg" /></p>
<div id="multispectral" class="section level3">
<h3>Multispectral</h3>
<p>Multispectral imagery captures typically 3-15 spectral bands in space.</p>
<p><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/multi.png" /></p>
</div>
<div id="hyperspectral" class="section level3">
<h3>Hyperspectral</h3>
<p>Hyperspectral imaging captures in the hundreds to thousands of bands.</p>
<p><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/hyper.png" /></p>
<hr />
</div>
</div>
<div id="resolutions" class="section level2 tabset">
<h2 class="tabset">Resolutions</h2>
<p>Resolution can be defined in many different ways. Here, think of resolution as the degree of detail in a process or attribute. Remote sensing is centered around 4 distinct resolutions: Spatial, Spectral, Temporal, Radiometric.</p>
<div id="spatial" class="section level3">
<h3>Spatial</h3>
<p>Spatial Resolution refers to pixel size. The smaller the pixel size, the greater the definition of the image. For example, Landsat satellites capture data in 30m resolution. Each pixel is 90x90 feet in area. That’s pretty big. My entire house and yard could fit in a single pixel. Looking at Landsat data, I could not be able to find my house.</p>
<p>Some imagery has fine spatial resolution at 1m. I could easily pick out my home in a 1m pixel image.</p>
<p>Spatial resolution is a primary driver in deciding what imagery to use for what analysis. A 30m spatial resolution image would be worthless if we are remotely sensing ant hills. A 1m spatial resolution would be terribly difficult to process if examining global processes.</p>
</div>
<div id="spectral" class="section level3">
<h3>Spectral</h3>
<p>“Spectral resolution describes the ability of a sensor to define fine wavelength intervals. The finer the spectral resolution, the narrower the wavelength range for a particular channel or band”.</p>
<p>The higher the spectral resolution, the more analyses you can process.</p>
</div>
<div id="temporal" class="section level3">
<h3>Temporal</h3>
<p>Temporal resolution refers to the return-interval among satellites. Landsat satellites revolve the earth in 16 days. That means every 16 days the satellite passes over the same geographic location on Earth.</p>
<p>Some imagery, like aerial imagery doesn’t have a temporal resolution. It is simply collected when it is collected.</p>
<p>Some satellites are fixed, meaning they are fixed over a specific location on Earth and rotate with the Earth, focusing on the same location constantly. These satellite have no temporal resolution.</p>
</div>
<div id="radiometric" class="section level3">
<h3>Radiometric</h3>
<p>“The radiometric resolution of image data in remote sensing stands for the ability of the sensor to distinguish different grey-scale values. It is measured in bit. The more bit an image has, the more grey-scale values can be stored, and, thus, more differences in the reflection on the land surfaces can be spotted.”</p>
<hr />
</div>
</div>
<div id="sensors-imagery" class="section level2 tabset">
<h2 class="tabset">Sensors &amp; Imagery</h2>
<div id="naip" class="section level3">
<h3>NAIP</h3>
<p>The National Agriculture Imagery Program (NAIP) acquires aerial imagery during the agricultural growing seasons in the continental U.S. A primary goal of the NAIP program is to make digital ortho photography available to governmental agencies and the public within a year of acquisition.</p>
<p>NAIP imagery is acquired from aircraft using film or digital cameras that meet rigid calibration specifications.</p>
<p><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/naip.jpg" /></p>
</div>
<div id="landsat" class="section level3">
<h3>Landsat</h3>
<p>The NASA/USGS Landsat Program provides the longest continuous space-based record of Earth’s land in existence. Landsat data give us information essential for making informed decisions about Earth’s resources and environment.</p>
<p>Spatial Resolution: 30m</p>
<p>Multi-Spectral</p>
<p>Temporal Resolution: 16 Days</p>
<p><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/landsat.jpg" /></p>
</div>
<div id="sentinel-2" class="section level3">
<h3>SENTINEL-2</h3>
<p>“SENTINEL-2 is a European wide-swath, high-resolution, multi-spectral imaging mission. The full mission specification of the twin satellites flying in the same orbit but phased at 180°, is designed to give a high revisit frequency of 5 days at the Equator.</p>
<p>SENTINEL-2 carries an optical instrument payload that samples 13 spectral bands: four bands at 10 m, six bands at 20 m and three bands at 60 m spatial resolution. The orbital swath width is 290 km.”</p>
<p><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/Sentinel-2.jpg" /></p>
</div>
<div id="modis" class="section level3">
<h3>MODIS</h3>
<p>“MODIS (or Moderate Resolution Imaging Spectroradiometer) is a key instrument aboard the Terra (originally known as EOS AM-1) and Aqua (originally known as EOS PM-1) satellites. Terra’s orbit around the Earth is timed so that it passes from north to south across the equator in the morning, while Aqua passes south to north over the equator in the afternoon. Terra MODIS and Aqua MODIS are viewing the entire Earth’s surface every 1 to 2 days, acquiring data in 36 spectral bands, or groups of wavelengths (see MODIS Technical Specifications).”</p>
<p>1km Spatial Resolution.</p>
<p><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/modis.jpg" /></p>
</div>
</div>
<div id="basic-remote-sensing-raster-functions" class="section level2">
<h2>Basic Remote Sensing (raster) Functions</h2>
<div id="rast" class="section level3">
<h3>rast()</h3>
<p>As we learned in week 5, rast() loads raster data.</p>
<hr />
</div>
<div id="project" class="section level3">
<h3>project()</h3>
<p>Project is the same function we used in week 5 and mimics st_transform() for raster data by projecting a raster to a different CRS.</p>
<p><strong>raster &lt;- terra::project(raster, new projection)</strong></p>
<hr />
</div>
<div id="c" class="section level3">
<h3>c()</h3>
<p>c() is for concatenate. We used this last week for stacking raster data.</p>
<hr />
</div>
<div id="plotrgb" class="section level3">
<h3>PlotRGB()</h3>
<p>Images you have seen from satellite imagery require a band combination of 3 bands. PlotRGB() stands for plot red, green, blue. Basically, the output image is a combination of the spectral properties of each band and where they are assigned in the image (either red, green, or blue locations).</p>
<hr />
</div>
</div>
<div id="vegetation-indices" class="section level2">
<h2>Vegetation Indices</h2>
<p>Vegetation indices are mathematical operations using spectral imagery bands that analyze imagery.</p>
<hr />
<div id="normalized-difference-vegetation-index-ndvi" class="section level3">
<h3>Normalized Difference Vegetation Index (NDVI)</h3>
<p>“The NDVI is a dimensionless index that describes the difference between visible and near-infrared reflectance of vegetation cover and can be used to estimate the density of green on an area of land” (Weier and Herring, 2000).</p>
<p>NDVI is a very common remote sensing vegetation indices. In simple form, it measures “greeness” of vegetation. This could be used to measure plant phenology, analyze unhealthy vegetation, or be used to classify imagery.</p>
<p>NDVI is calculated by the following band formula:</p>
<p><strong>(Near-Infrared - Red)/(Near-Infrared + Red)</strong></p>
<p><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/ndvi.jpg" /></p>
<hr />
</div>
</div>
<div id="unsupervised-classification" class="section level2">
<h2>Unsupervised Classification</h2>
<p>“The goal of unsupervised classification is to automatically segregate pixels of a remote sensing image into groups of similar spectral character.</p>
<p>Classification is done using one of several statistical routines generally called “clustering” where classes of pixels are created based on their shared spectral signatures.” - David Harbor</p>
<hr />
<div id="k-means-clustering" class="section level3">
<h3>K-means clustering</h3>
<p>k-means clustering is a method of vector quantization, originally from signal processing, that aims to partition n observations into k clusters in which each observation belongs to the cluster with the nearest mean, serving as a prototype of the cluster.</p>
</div>
</div>
<div id="section" class="section level2">
<h2><img src="D:/R%20Textbook%20Template/NR6950%20Notebook/NR%206950%20Notebook/images/classification.png" /></h2>
</div>
<div id="gathering-remote-sensing-imagery" class="section level2">
<h2>Gathering Remote Sensing Imagery</h2>
<p>USGS Earth Explorer - <a href="https://earthexplorer.usgs.gov/" class="uri">https://earthexplorer.usgs.gov/</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
